# Hubserver
---

env:
  NAME: hubserver
  IMAGE: pressly/hubserver
  REGISTRY: registry.x.pressly.io
  CONFIG: /data/etc/hubserver.conf
  HOST_PORT: 80
  CONTAINER_PORT: 3000
  USER: $USER
  FOO: "bar"

networks:
  local: # For testing purposes only
    env:
      CONFIG: /data/etc/hubserver-local.conf
    hosts:
      - docker@192.168.59.103
      - docker@192.168.59.103
      - docker@192.168.59.103
      - docker@192.168.59.103
  dev:
    hosts:
      - ubuntu@betabox.x.pressly.io
  beta:
    hosts:
      - ubuntu@betabox.x.pressly.io:22
  prod:
    hosts:
      - ubuntu@betabox.x.pressly.io

commands:
  ping:
    run: uname -a

  date:
    run: date

  sleep:
    run: sleep 0.$RANDOM

  ps:
    desc: Container list
    run: sudo docker ps

  hello:
    desc: Say something..
    script: ./scripts/hello.sh


targets:
  test:
    - ping
    - date
    - sleep
    - ping
    - date
    - sleep
    - ping
    - date
  deploy:
    - build
    - provision
    - run
